# Документация по классам

## Класс `NsDb`

### Описание:
Класс `NsDb` предназначен для работы с таблицами данных, которые хранят строки и их индексы. Он позволяет добавлять строки, получать строки по индексу, а также проверять уникальность сообщений.

### Основные методы:

#### `NsDb:new(input_table, input_table_p, key, str_len, tbl_size)`
- **Описание**: Конструктор для создания нового объекта `NsDb`.
- **Параметры**:
  - `input_table`: Основная таблица для хранения данных.
  - `input_table_p`: Таблица-указатель для хранения дополнительных данных (опционально).
  - `key`: Ключ для доступа к данным в таблице.
  - `str_len`: Максимальная длина строки.
  - `tbl_size`: Размер таблицы.
- **Возвращает**: Новый объект `NsDb`.

#### `NsDb:getLine(line)`
- **Описание**: Получает строку по индексу.
- **Параметры**:
  - `line`: Индекс строки.
- **Возвращает**: Строку или `nil`, если строка не найдена.

#### `NsDb:create_bin(message, str)`
- **Описание**: Создает бинарное представление сообщения и добавляет его в таблицу.
- **Параметры**:
  - `message`: Сообщение для добавления.
  - `str`: Флаг, указывающий, нужно ли добавлять сообщение в существующую строку (0 — новая строка, 1 — добавление к существующей).

#### `NsDb:add_str(message)`
- **Описание**: Добавляет сообщение в таблицу.
- **Параметры**:
  - `message`: Сообщение для добавления.

#### `NsDb:add_line(message)`
- **Описание**: Добавляет строку в таблицу.
- **Параметры**:
  - `message`: Сообщение для добавления.

#### `NsDb:add_dict(message, kod)`
- **Описание**: Добавляет словарь в таблицу.
- **Параметры**:
  - `message`: Ключ словаря.
  - `kod`: Значение словаря.

#### `NsDb:add_fdict(msg)`
- **Описание**: Добавляет сообщение в хэш-таблицу.
- **Параметры**:
  - `msg`: Сообщение для добавления.

#### `NsDb:get_fdict(index)`
- **Описание**: Получает сообщение из хэш-таблицы по индексу.
- **Параметры**:
  - `index`: Индекс сообщения.
- **Возвращает**: Сообщение или `nil`, если индекс вне диапазона.

#### `NsDb:is_unique(message)`
- **Описание**: Проверяет уникальность сообщения в таблице.
- **Параметры**:
  - `message`: Сообщение для проверки.
- **Возвращает**: `true`, если сообщение уникально, иначе `false`.

#### `NsDb:pLen()`
- **Описание**: Возвращает длину таблицы-указателя.
- **Возвращает**: Длину таблицы или `nil`, если таблица-указатель отсутствует.

#### `NsDb:Len()`
- **Описание**: Возвращает длину основной таблицы.
- **Возвращает**: Длину таблицы.

#### `NsDb:mod_key(change_key, num, message)`
- **Описание**: Изменяет ключ в таблице.
- **Параметры**:
  - `change_key`: Новый ключ.
  - `num`: Номер строки.
  - `message`: Сообщение для добавления.

### Пример использования:

```lua
-- Создаем таблицу для хранения данных
local input_table = {}
local input_table_p = {}

-- Создаем объект NsDb
local nsDb = NsDb:new(input_table, input_table_p, "myKey", 100, 10)

-- Добавляем строку в таблицу
nsDb:add_str("Пример строки")

-- Получаем строку по индексу
local line = nsDb:getLine(1)
print(line)  -- Вывод: "Пример строки"